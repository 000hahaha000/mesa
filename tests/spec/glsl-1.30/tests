# All tests here are registered into the 'spec_glsl_130' group.
spec_glsl_130 = Group()
spec['glsl-1.30'] = spec_glsl_130

# Register each shader source file in the directories below as
# a GLSLParserTest.  The test names adhere to the pattern
# 'glsl-1.30/.../filename'.
for d in ['preprocessor', 'compiler']:
	walk_dir = path.join('tests', 'spec', 'glsl-1.30', d)
	for (dirpath, dirnames, filenames) in os.walk(walk_dir):
		# Ignore dirnames.
		for f in filenames:
			# Add f as a test if its file extension is good.
			ext = f.rsplit('.')[-1]
			if ext in ['vert', 'geo', 'frag']:
				filepath = path.join(dirpath, f)
				# testname := filepath with initial
				#     'tests/spec/glsl-1.30' removed
				sep = os.sep
				testname = sep.join(filepath.split(sep)[3:])
				assert(type(testname) is str)
				add_glsl_parser_test(
						spec_glsl_130,
						filepath,
						testname)

# vim: ft=python noet ts=8 sw=8:
