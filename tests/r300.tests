#!/usr/bin/python
#
# Testing the r300 DRI driver
#

import os

execfile(os.path.dirname(__file__) + '/all.tests')

from framework.core import *
from framework.gleantest import *



# Potentially serious problem, but workaround for now
GleanTest.globalParams += [ '--visuals', 'id != 0x4b' ]
Test.ignoreErrors.append('3D driver claims to not support')

# Debug info
Test.ignoreErrors.append('Try R300_SPAN_DISABLE_LOCKING env var if this hangs.')


# glean/blendFunc
#   R300 blending hardware appears to be bad
env = profile.tests['glean']['blendFunc'].env
env['GLEAN_BLEND_RGB_TOLERANCE'] = 1.9
env['GLEAN_BLEND_ALPHA_TOLERANCE'] = 2.0

# glean/exactRGBA
#   insane OpenGL spec requirements
env = profile.tests['glean']['exactRGBA'].env
env['GLEAN_EXACTRGBA_ROUNDING'] = 1

