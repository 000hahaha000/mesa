from framework.core import Group, TestProfile
from framework.exectest import PlainExecTest

def concurrent_test(args):
    test = PlainExecTest(args.split() + ['-auto', '-fbo'])
    test.runConcurrent = True
    return test

profile = TestProfile()

spec = Group()
profile.tests['spec'] = spec

gles30 = Group()
spec['!OpenGL ES 3.0'] = gles30
for tex_format in ('rgb8', 'srgb8', 'rgba8', 'srgb8-alpha8', 'r11', 'rg11', 'rgb8-punchthrough-alpha1', 'srgb8-punchthrough-alpha1'):
	test_name = ' ' .join(['oes_compressed_etc2_texture-miptree', tex_format])
	executable = '{0} -auto'.format(test_name)
	gles30[test_name] = concurrent_test(executable)
gles30['minmax'] = concurrent_test('gles-3.0-minmax')
